* IMPLICITO(NATIVO DO SISTEMA) *

CONNECT scott/tiger@//localhost:1521/FREEPDB1 -- dentro do sql plus

SET SERVEROUTPU ON

VARIAVEL LINHAS_DELETADAS VARCHAR2 (30) -- VARIAVEL DE AMBIENTE

DECLARE
	V_DEPTNO NUMBER := 10;
BEGIN
	DELETE FROM EMP
	WHERE DEPTNO = V_DEPTNO;
	:LINHAS_DELETADAS := (SQL%ROWCOUNT || ' LINHAS DELETADAS.'); --SQL%ROWCOUNT É UM CURSOR IMPLICITO
END;
/

PRINT LINHAS_DELETADAS
ROLLBACK;

------------------------------------------------
* EXPLICITO(CRIADO POR NOS) *

CONNECT scott/tiger@//localhost:1521/FREEPDB1 -- dentro do sql plus

SET SERVEROUTPU ON

ACCEPT P_CARGO_FUNC PROMPT 'DIGITE O CARGO DO FUNCIONARIO '

VARIABLE G_N_OCORRENCIAS NUMBER;
DROP TABLE SAL_TOT;
CREATE TABLE SAL_TOT (ENAME VARCHAR2(50), SAL_MES NUMBER(7,2), SAL_TOT NUMBER(7,2))

DECLARE
	V_CARGO_FUNC EMP.JOB%TYPE := UPPER('&P_CARGO_FUNC')
	V_NOME_FUNC EMP.ENAME%TYPE;
	V_SAL_MES EMP.SAL%TYPE;
	V_SAL_ANO NUMBER(9,2);

	CURSOR SAL_FUNC_CURSOR IS -- IS OU AS É PARA MARCAR O BLOCO EXECUTAVEL
		SELECT ENAME, SAL, SAL * 12
		FROM EMP
		WHERE JOB = V_CARGO_FUNC;

BEGIN
	OPEN SAL_FUNC_CURSOR; --VAI ATIVAR O CURSOR, É NECESSARIO APENAS NO CURSOR EXPLICITO
	LOOP
		FETCH SAL_FUNC_CURSOR INTO V_NOME_FUNC, V_SAL_MES, V_SAL_ANO;
		EXIT WHEN SAL_FUNC_CURSOR%NOTFOUND;
		INSERT INTO SAL_TOT(ENAME, SAL_MES, SAL_TOT) VALUES (V_NOME_FUNC, V_SAL_MES, V_SAL_ANO);
	END LOOP;
	:G_N_OCORRENCIAS := SAL_FUNC_CURSOR%ROWCOUNT;
	CLOSE SAL_FUNC_CURSOR; -- VAI DESLIGAR O CURSOR
END;
/







