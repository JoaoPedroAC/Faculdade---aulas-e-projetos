* PROCEDURE *

CREATE OR REPLACE PROCEDURE EXEMPLO_PROC(
	N IN NUMBER, -- ESSE IN É PARA CAPTAR ENTRADA DE DADO
	FATORIAL OUT NUMBER -- OUT É PARA SAIDA DE DADO
)
IS -- É A PARTIR DAQUI QUE COMEÇA O CODIGO
BEGIN
	FATORIAL := 1;
	FOR I IN 2 .. N LOOP -- ESTRUTURA DO LOOP
		FATORIAL := FATORIAL * 1;
	END LOOP;
END EXEMPLO_PROC;
/
EXECUTE EXEMPLO_PROC(2);

------------------------------------------------
* FUNCTION *

CREATE OR REPLACE FUNCTION EXEMPLO_FUNC(
	N IN NUMBER
)
RETURN NUMBER -- TER RETURN É OBRIGATORIO
IS
	FATORIAL NUMBER := 1;
BEGIN
	FOR I IN 2..N LOOP
		FATORIAL := FATORIAL * I;
	END LOOP;
	RETURN FATORIAL; -- TER RETURN É OBRIGATORIO
END EXEMPLO_FUNC;
/
SELECT EXEMPLO_FUNC(5); -- PODE SER EXECUTADO DE QUAL QUER LUGAR


*  RECURSIVIDADE *

CREATE OR REPLACE FUNCTION EXEMPLO_FUNC_REC(
	N IN NUMBER
)
RETURN NUMBER
IS
BEGIN
	IF N = 2 THEN
		RETURN 2;
	ELSE
		RETURN N * EXEMPLO_FUNC_REC(N - 1);
	END IF;
END EXEMPLO_FUNC_REC;
/

SELECT EXEMPLO_FUNC_REC(5) FROM DUAL; 

-----------------------------------------------------------
* PACKAGES *


CONNECT scott/tiger@//localhost:1521/FREEPDB1 -- dentro do sql plus

CREATE OR REPLACE PACKAGE EXEMPLO_PACK -- CABEÇALHO DO PACOTE
IS
	PROCEDURE REAJUSTE(
		V_CODIGO_EMP IN EMP.EMPNO%TYPE,
		V_PORCENTAGEM IN NUMBER);
		FUNCTION DESCOBRIR_SALARIO(P_ID IN EMP.EMPNO%TYPE)
			RETURN NUMBER;
END EXEMPLO_PACK;
/

CREATE OR REPLACE PACKAGE BODY EXEMPLO_PACK IS
PROCEDURE REAJUSTE(V_CODIGO_EMP IN EMP.EMPNO%TYPE, V_PORCENTAGEM IN NUMBER)
IS
BEGIN
	UPDATE EMP
	SET SAL = SAL + (SAL * (V_PORCENTAGEM / 100))
	WHERE EMPNO = V_CODIGO_EMP;
	COMMIT;
END REAJUSTE;

FUNCTION DESCOBRIR_SALARIO(P_ID IN EMP.EMPNO%TYPE)
RETURN NUMBER
IS
V_SALARIO EMP.SAL%TYPE := 0;
	BEGIN
		SELECT SAL INTO V_SALARIO FROM EMP WHERE EMPNO = P_ID;
		RETURN V_SALARIO;
	END DESCOBRIR_SALARIO;
END EXEMPLO_PACK;
/

SELECT EXEMPLO_PACK.DESCOBRIR_SALARIO(7934) FROM DUAL;

EXECUTE EXEMPLO_PACK.REAJUSTE(7934, 25); -- PROCEDIMENTO DE AUMENTO

SELECT EXEMPLO_PACK.DESCOBRIR_SALARIO(7934) FROM DUAL;

---------------------------------------------------







